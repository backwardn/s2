dist: trusty
language: go
go:
  - "1.13.1"

# workaround for travis not handling ssh git urls well:
# https://stackoverflow.com/a/24600210/202309
git:
  submodules: false
before_install:
  - sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
  - git submodule update --init --recursive

script:
  - ./etc/travis.sh

before_cache:
  # Travis can't cache files that are not readable by "others"
  - chmod -R a+r ${GOPATH}/pkg
cache:
  directories:
  - $${GOPATH}/pkg

notifications:
  email:
on_success: never
